{"ast":null,"code":"import _toConsumableArray from \"/home/haiduong/B\\u1EA3n t\\u1EA3i v\\u1EC1/blockchain-memory-game-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/haiduong/B\\u1EA3n t\\u1EA3i v\\u1EC1/blockchain-memory-game-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/haiduong/B\\u1EA3n t\\u1EA3i v\\u1EC1/blockchain-memory-game-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/haiduong/B\\u1EA3n t\\u1EA3i v\\u1EC1/blockchain-memory-game-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/haiduong/B\\u1EA3n t\\u1EA3i v\\u1EC1/blockchain-memory-game-master/src/components/App.js\";\nimport React, { useEffect, useState } from 'react';\nimport Web3 from 'web3';\nimport './App.css';\nimport MemoryToken from '../abis/MemoryToken.json';\nimport brain from '../brain.png';\nvar CARD_ARRAY = [{\n  name: 'fries',\n  img: '/images/fries.png'\n}, {\n  name: 'cheeseburger',\n  img: '/images/cheeseburger.png'\n}, {\n  name: 'ice-cream',\n  img: '/images/ice-cream.png'\n}, {\n  name: 'pizza',\n  img: '/images/pizza.png'\n}, {\n  name: 'milkshake',\n  img: '/images/milkshake.png'\n}, {\n  name: 'hotdog',\n  img: '/images/hotdog.png'\n}, {\n  name: 'fries',\n  img: '/images/fries.png'\n}, {\n  name: 'cheeseburger',\n  img: '/images/cheeseburger.png'\n}, {\n  name: 'ice-cream',\n  img: '/images/ice-cream.png'\n}, {\n  name: 'pizza',\n  img: '/images/pizza.png'\n}, {\n  name: 'milkshake',\n  img: '/images/milkshake.png'\n}, {\n  name: 'hotdog',\n  img: '/images/hotdog.png'\n}];\n\nfunction App() {\n  var _this = this;\n\n  var _useState = useState('0x0'),\n      _useState2 = _slicedToArray(_useState, 2),\n      account = _useState2[0],\n      setAccount = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      token = _useState4[0],\n      setToken = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalSupply = _useState6[0],\n      setTotalSupply = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tokenURIs = _useState8[0],\n      setTokenURIs = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      cardArray = _useState10[0],\n      setCardArray = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      cardsChosen = _useState12[0],\n      setCardsChosen = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      cardsChosenId = _useState14[0],\n      setCardsChosenId = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      cardsWon = _useState16[0],\n      setCardsWon = _useState16[1];\n\n  useEffect(function () {\n    function loadWeb3() {\n      return _loadWeb.apply(this, arguments);\n    }\n\n    function _loadWeb() {\n      _loadWeb = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!window.ethereum) {\n                  _context.next = 6;\n                  break;\n                }\n\n                window.web3 = new Web3(window.ethereum);\n                _context.next = 4;\n                return window.ethereum.enable();\n\n              case 4:\n                _context.next = 7;\n                break;\n\n              case 6:\n                if (window.web3) {\n                  window.web3 = new Web3(window.web3.currentProvider);\n                } else {\n                  window.alert(\"Non-Ethereum browser deteced. You should consider trying MetaMask!\");\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _loadWeb.apply(this, arguments);\n    }\n\n    function loadBlockchainData() {\n      return _loadBlockchainData.apply(this, arguments);\n    }\n\n    function _loadBlockchainData() {\n      _loadBlockchainData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var web3, accounts, networkId, netWorkData, address, abi, _token, _totalSupply, balanceOf, arrayTokenURI, i, id, tokenURI;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                web3 = window.web3;\n                _context2.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accounts = _context2.sent;\n                setAccount(accounts[0]); // load smart contract\n\n                _context2.next = 7;\n                return web3.eth.net.getId();\n\n              case 7:\n                networkId = _context2.sent;\n                netWorkData = MemoryToken.networks[networkId];\n\n                if (!netWorkData) {\n                  _context2.next = 37;\n                  break;\n                }\n\n                address = netWorkData.address;\n                abi = MemoryToken.abi;\n                _token = new web3.eth.Contract(abi, address);\n                setToken(_token);\n                _context2.next = 16;\n                return _token.methods.totalSupply().call();\n\n              case 16:\n                _totalSupply = _context2.sent;\n                setTotalSupply(_totalSupply); // load tokens ...\n\n                _context2.next = 20;\n                return _token.methods.balanceOf(accounts[0]).call();\n\n              case 20:\n                balanceOf = _context2.sent;\n                arrayTokenURI = [];\n                i = 0;\n\n              case 23:\n                if (!(i < balanceOf)) {\n                  _context2.next = 34;\n                  break;\n                }\n\n                _context2.next = 26;\n                return _token.methods.tokenOfOwnerByIndex(accounts[0], i).call();\n\n              case 26:\n                id = _context2.sent;\n                _context2.next = 29;\n                return _token.methods.tokenURI(id).call();\n\n              case 29:\n                tokenURI = _context2.sent;\n                arrayTokenURI.push(tokenURI);\n\n              case 31:\n                i++;\n                _context2.next = 23;\n                break;\n\n              case 34:\n                setTokenURIs([].concat(_toConsumableArray(tokenURIs), arrayTokenURI));\n                _context2.next = 38;\n                break;\n\n              case 37:\n                window.alert(\"Smart contract not deployed to detected network.\");\n\n              case 38:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _loadBlockchainData.apply(this, arguments);\n    }\n\n    function sortRandomCards() {\n      var newCardArray = CARD_ARRAY.sort(function () {\n        return 0.5 - Math.random();\n      });\n      setCardArray(newCardArray);\n    }\n\n    loadWeb3();\n    loadBlockchainData();\n    sortRandomCards();\n  }, []);\n\n  function handleChooseImage(cardIndex) {\n    cardIndex = cardIndex.toString();\n\n    if (cardsWon.includes(cardIndex)) {\n      return window.location.origin + '/images/white.png';\n    } else if (cardsChosenId.includes(cardIndex)) {\n      return CARD_ARRAY[cardIndex].img;\n    } else {\n      return window.location.origin + '/images/blank.png';\n    }\n  }\n\n  function checkForMatch(nextCardChosen, nextCardChosenId) {\n    var optionOneId = cardsChosenId[0];\n    var optionTwoId = nextCardChosenId;\n\n    if (optionOneId === optionTwoId) {\n      alert(\"You have clicked the same image!\");\n    } else if (cardsChosen[0] === nextCardChosen) {\n      alert(\"You find a match\");\n      token.methods(account, window.location.origin + CARD_ARRAY[optionOneId].img.toString()).send({\n        from: account\n      }).on('transactionHash', function (hash) {\n        setCardsWon([].concat(_toConsumableArray(cardsWon), [optionOneId, optionTwoId]));\n      });\n    } else {\n      alert(\"Better next time\");\n    }\n\n    setCardsChosen([]);\n    setCardsChosenId([]);\n\n    if (cardsWon.length === CARD_ARRAY.length) {\n      alert(\"Congratulation! You found them all!\");\n    }\n  }\n\n  function hadnleFlipCard(cardId) {\n    var alreadyChosen = cardsChosen.length;\n    setCardsChosen([].concat(_toConsumableArray(cardsChosen), [cardArray[cardId].name]));\n    setCardsChosenId([].concat(_toConsumableArray(cardsChosenId), [cardId]));\n\n    if (alreadyChosen === 1) {\n      setTimeout(function () {\n        return checkForMatch(cardArray[cardId].name, cardId);\n      }, 100);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"navbar-brand col-sm-3 col-md-2 mr-0\",\n    href: \"http://www.dappuniversity.com/bootcamp\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: brain,\n    width: \"30\",\n    height: \"30\",\n    className: \"d-inline-block align-top\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }), \"\\xA0 Memory Tokens\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-nav px-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item text-nowrap d-none d-sm-none d-sm-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    className: \"text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 43\n    }\n  }, account))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"main\", {\n    role: \"main\",\n    className: \"col-lg-12 d-flex text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content mr-auto ml-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"d-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, \"Edit this file in App.js!\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grid mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, cardArray.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: Math.random(),\n      src: handleChooseImage(index),\n      \"data-id\": index,\n      onClick: function onClick(e) {\n        var cardId = e.target.getAttribute('data-id');\n\n        if (!cardsWon.includes(cardId.toString())) {\n          hadnleFlipCard(cardId);\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 23\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, \"Token collected: \", /*#__PURE__*/React.createElement(\"span\", {\n    id: \"result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 38\n    }\n  }, \"\\xA0 \", tokenURIs.length)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"grid mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 17\n    }\n  }, tokenURIs.map(function (tokenURI) {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: Math.random(),\n      src: tokenURI,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 25\n      }\n    });\n  }))))))));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/haiduong/Bản tải về/blockchain-memory-game-master/src/components/App.js"],"names":["React","useEffect","useState","Web3","MemoryToken","brain","CARD_ARRAY","name","img","App","account","setAccount","token","setToken","totalSupply","setTotalSupply","tokenURIs","setTokenURIs","cardArray","setCardArray","cardsChosen","setCardsChosen","cardsChosenId","setCardsChosenId","cardsWon","setCardsWon","loadWeb3","window","ethereum","web3","enable","currentProvider","alert","loadBlockchainData","eth","getAccounts","accounts","net","getId","networkId","netWorkData","networks","address","abi","Contract","methods","call","balanceOf","arrayTokenURI","i","tokenOfOwnerByIndex","id","tokenURI","push","sortRandomCards","newCardArray","sort","Math","random","handleChooseImage","cardIndex","toString","includes","location","origin","checkForMatch","nextCardChosen","nextCardChosenId","optionOneId","optionTwoId","send","from","on","hash","length","hadnleFlipCard","cardId","alreadyChosen","setTimeout","map","item","index","e","target","getAttribute"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Web3 from 'web3'\nimport './App.css';\nimport MemoryToken from '../abis/MemoryToken.json'\nimport brain from '../brain.png'\n\n\nconst CARD_ARRAY = [\n  {\n    name: 'fries',\n    img: '/images/fries.png'\n  },\n  {\n    name: 'cheeseburger',\n    img: '/images/cheeseburger.png'\n  },\n  {\n    name: 'ice-cream',\n    img: '/images/ice-cream.png'\n  },\n  {\n    name: 'pizza',\n    img: '/images/pizza.png'\n  },\n  {\n    name: 'milkshake',\n    img: '/images/milkshake.png'\n  },\n  {\n    name: 'hotdog',\n    img: '/images/hotdog.png'\n  },\n  {\n    name: 'fries',\n    img: '/images/fries.png'\n  },\n  {\n    name: 'cheeseburger',\n    img: '/images/cheeseburger.png'\n  },\n  {\n    name: 'ice-cream',\n    img: '/images/ice-cream.png'\n  },\n  {\n    name: 'pizza',\n    img: '/images/pizza.png'\n  },\n  {\n    name: 'milkshake',\n    img: '/images/milkshake.png'\n  },\n  {\n    name: 'hotdog',\n    img: '/images/hotdog.png'\n  }\n]\n\n\nfunction App() {\n  const [account, setAccount] = useState('0x0')\n  const [token, setToken] = useState({})\n  const [totalSupply, setTotalSupply] = useState(0)\n  const [tokenURIs, setTokenURIs] = useState([])\n  const [cardArray, setCardArray] = useState([])\n  const [cardsChosen, setCardsChosen] = useState([])\n  const [cardsChosenId, setCardsChosenId] = useState([])\n  const [cardsWon, setCardsWon] = useState([])\n\n  useEffect(() => {\n    async function loadWeb3() {\n      if (window.ethereum) {\n        window.web3 = new Web3(window.ethereum)\n        await window.ethereum.enable()\n      } else if (window.web3) {\n        window.web3 = new Web3(window.web3.currentProvider)\n      } else {\n        window.alert(\"Non-Ethereum browser deteced. You should consider trying MetaMask!\")\n      }\n    }\n  \n    async function loadBlockchainData() {\n      const web3 = window.web3\n      const accounts = await web3.eth.getAccounts()\n      setAccount(accounts[0])\n\n      // load smart contract\n      const networkId = await web3.eth.net.getId()\n      const netWorkData =  MemoryToken.networks[networkId]\n      if (netWorkData) {\n        const address = netWorkData.address\n        const abi = MemoryToken.abi\n        const token = new web3.eth.Contract(abi, address)\n        setToken(token)\n        const totalSupply =  await token.methods.totalSupply().call()\n        setTotalSupply(totalSupply)\n        \n        // load tokens ...\n        let balanceOf = await token.methods.balanceOf(accounts[0]).call()\n        let arrayTokenURI = []\n        for (let i = 0; i < balanceOf; i++) {\n          let id = await token.methods.tokenOfOwnerByIndex(accounts[0], i).call()\n          let tokenURI = await token.methods.tokenURI(id).call()\n          arrayTokenURI.push(tokenURI)\n        } \n        setTokenURIs([...tokenURIs, ...arrayTokenURI ])\n      } else {\n         window.alert(\"Smart contract not deployed to detected network.\")\n      }\n    }\n\n    function sortRandomCards() {\n      const newCardArray = CARD_ARRAY.sort(() => 0.5 - Math.random())\n      setCardArray(newCardArray)\n    }\n\n    loadWeb3()\n    loadBlockchainData()\n    sortRandomCards()\n  },[])\n\n  function handleChooseImage(cardIndex) {\n    cardIndex = cardIndex.toString()\n    if(cardsWon.includes(cardIndex)) {\n      return window.location.origin + '/images/white.png'\n    }\n    else if(cardsChosenId.includes(cardIndex)) {\n      return CARD_ARRAY[cardIndex].img\n    } else {\n      return window.location.origin + '/images/blank.png'\n    }\n  }\n\n  function checkForMatch(nextCardChosen, nextCardChosenId) {\n    let optionOneId = cardsChosenId[0]\n    let optionTwoId = nextCardChosenId\n    if (optionOneId === optionTwoId) {\n      alert(\"You have clicked the same image!\")\n    } else if (cardsChosen[0] === nextCardChosen) {\n      alert(\"You find a match\")\n      token.methods(\n        account,\n        window.location.origin + CARD_ARRAY[optionOneId].img.toString()\n      )\n      .send({ from: account })\n      .on('transactionHash', (hash) => {\n        setCardsWon([...cardsWon, optionOneId, optionTwoId])\n      })\n\n    } else {\n      alert(\"Better next time\")\n    }\n    setCardsChosen([])\n    setCardsChosenId([])\n    if (cardsWon.length === CARD_ARRAY.length) {\n      alert(\"Congratulation! You found them all!\")\n    }\n  }\n\n  function hadnleFlipCard(cardId) {\n    let alreadyChosen = cardsChosen.length\n    setCardsChosen([...cardsChosen, cardArray[cardId].name])\n    setCardsChosenId([...cardsChosenId, cardId])\n\n    if (alreadyChosen === 1) {\n      setTimeout(() => checkForMatch(cardArray[cardId].name, cardId), 100)\n    }\n  }\n\n  return (\n    <div>\n      <nav className=\"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow\">\n        <a\n          className=\"navbar-brand col-sm-3 col-md-2 mr-0\"\n          href=\"http://www.dappuniversity.com/bootcamp\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n        <img src={brain} width=\"30\" height=\"30\" className=\"d-inline-block align-top\" alt=\"\" />\n        &nbsp; Memory Tokens\n        </a>\n        <ul className=\"navbar-nav px-3\">\n          <li className=\"nav-item text-nowrap d-none d-sm-none d-sm-block\">\n            <small className=\"text-muted\"><span id=\"account\">{account}</span></small>\n          </li>\n        </ul>\n      </nav>\n      <div className=\"container-fluid mt-5\">\n        <div className=\"row\">\n          <main role=\"main\" className=\"col-lg-12 d-flex text-center\">\n            <div className=\"content mr-auto ml-auto\">\n              <h1 className=\"d-4\">Edit this file in App.js!</h1>\n\n              <div className=\"grid mb-4\" >\n                {\n                  cardArray.map((item, index) => {\n                    return (\n                      <img \n                        key={Math.random()}\n                        src={handleChooseImage(index)}\n                        data-id={index}\n                        onClick={(e) => {\n                          let cardId = e.target.getAttribute('data-id')\n                          if (!cardsWon.includes(cardId.toString())) {\n                            hadnleFlipCard(cardId)\n                          }\n                        }}\n                      />\n                    )\n                  })\n                }\n              </div>\n\n              <div>\n                <h5>Token collected: <span id=\"result\">&nbsp; {tokenURIs.length}</span></h5>\n                <div className=\"grid mb-4\" >\n                  {\n                    tokenURIs.map((tokenURI => {\n                      return (\n                        <img \n                          key={Math.random()}\n                          src={tokenURI}\n                        />\n                      )\n                    }))\n                  }\n                </div>\n\n              </div>\n\n            </div>\n\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}